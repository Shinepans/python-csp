<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>CSP based on POSIX threads &mdash; python-csp v0.1 documentation</title>
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '#',
        VERSION:     '0.1',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="python-csp v0.1 documentation" href="index.html" />
    <link rel="next" title="Debugging with the tracer module" href="tracer.html" />
    <link rel="prev" title="CSP based on OS processes" href="cspprocess.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="modindex.html" title="Global Module Index"
             accesskey="M">modules</a> |</li>
        <li class="right" >
          <a href="tracer.html" title="Debugging with the tracer module"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="cspprocess.html" title="CSP based on OS processes"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">python-csp v0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="module-cspthread">
<h1>CSP based on POSIX threads<a class="headerlink" href="#module-cspthread" title="Permalink to this headline">¶</a></h1>
<p>Communicating sequential processes, in Python.</p>
<p>When using CSP Python as a DSL, this module will normally be imported
via the statement &#8216;from csp.cspthread import <a href="#id1"><span class="problematic" id="id2">*</span></a>&#8216;.</p>
<p>Copyright (C) Sarah Mount, 2009.</p>
<p>This program is free software; you can redistribute it and/or
modify it under the terms of the GNU General Public License
as published by the Free Software Foundation; either version 2
of the License, or (at your option) any later version.</p>
<p>This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.</p>
<p>You should have rceeived a copy of the GNU General Public License
along with this program; if not, write to the Free Software
Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA</p>
<dl class="class">
<dt id="cspthread.CSPProcess">
<em class="property">class </em><tt class="descclassname">cspthread.</tt><tt class="descname">CSPProcess</tt><big>(</big><em>func</em>, <em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#cspthread.CSPProcess" title="Permalink to this definition">¶</a></dt>
<dd><p>Implementation of CSP processes.
Not intended to be used in client code. Use &#64;process instead.</p>
<dl class="method">
<dt id="cspthread.CSPProcess.getPid">
<tt class="descname">getPid</tt><big>(</big><big>)</big><a class="headerlink" href="#cspthread.CSPProcess.getPid" title="Permalink to this definition">¶</a></dt>
<dd><p>Return thread ident.</p>
<p>The name of this method ensures that the CSPProcess interface
in this module is identical to the one defined in
cspprocess.py.</p>
</dd></dl>

<dl class="method">
<dt id="cspthread.CSPProcess.run">
<tt class="descname">run</tt><big>(</big><big>)</big><a class="headerlink" href="#cspthread.CSPProcess.run" title="Permalink to this definition">¶</a></dt>
<dd>Called automatically when the L{start} methods is called.</dd></dl>

</dd></dl>

<dl class="class">
<dt id="cspthread.CSPServer">
<em class="property">class </em><tt class="descclassname">cspthread.</tt><tt class="descname">CSPServer</tt><big>(</big><em>func</em>, <em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#cspthread.CSPServer" title="Permalink to this definition">¶</a></dt>
<dd><p>Implementation of CSP server processes.
Not intended to be used in client code. Use &#64;forever instead.</p>
<dl class="method">
<dt id="cspthread.CSPServer.run">
<tt class="descname">run</tt><big>(</big><big>)</big><a class="headerlink" href="#cspthread.CSPServer.run" title="Permalink to this definition">¶</a></dt>
<dd>Called automatically when the L{start} methods is called.</dd></dl>

</dd></dl>

<dl class="class">
<dt id="cspthread.Alt">
<em class="property">class </em><tt class="descclassname">cspthread.</tt><tt class="descname">Alt</tt><big>(</big><em>*args</em><big>)</big><a class="headerlink" href="#cspthread.Alt" title="Permalink to this definition">¶</a></dt>
<dd><p>CSP select (OCCAM ALT) process.</p>
<p>What should happen if a guard is poisoned?</p>
<dl class="method">
<dt id="cspthread.Alt.fair_select">
<tt class="descname">fair_select</tt><big>(</big><big>)</big><a class="headerlink" href="#cspthread.Alt.fair_select" title="Permalink to this definition">¶</a></dt>
<dd>Select a guard to synchronise with. Do not select the
previously selected guard (unless it is the only guard
available).</dd></dl>

<dl class="method">
<dt id="cspthread.Alt.poison">
<tt class="descname">poison</tt><big>(</big><big>)</big><a class="headerlink" href="#cspthread.Alt.poison" title="Permalink to this definition">¶</a></dt>
<dd><p>Poison the last selected guard and unlink from the guard list.</p>
<p>Sets self.last_selected to None.</p>
</dd></dl>

<dl class="method">
<dt id="cspthread.Alt.pri_select">
<tt class="descname">pri_select</tt><big>(</big><big>)</big><a class="headerlink" href="#cspthread.Alt.pri_select" title="Permalink to this definition">¶</a></dt>
<dd>Select a guard to synchronise with, in order of
&#8220;priority&#8221;. The guard with the lowest index in the L{guards}
list has the highest priority.</dd></dl>

<dl class="method">
<dt id="cspthread.Alt.select">
<tt class="descname">select</tt><big>(</big><big>)</big><a class="headerlink" href="#cspthread.Alt.select" title="Permalink to this definition">¶</a></dt>
<dd>Randomly select from ready guards.</dd></dl>

</dd></dl>

<dl class="class">
<dt id="cspthread.Par">
<em class="property">class </em><tt class="descclassname">cspthread.</tt><tt class="descname">Par</tt><big>(</big><em>*procs</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#cspthread.Par" title="Permalink to this definition">¶</a></dt>
<dd><p>Run CSP processes in parallel.</p>
<dl class="method">
<dt id="cspthread.Par.getPid">
<tt class="descname">getPid</tt><big>(</big><big>)</big><a class="headerlink" href="#cspthread.Par.getPid" title="Permalink to this definition">¶</a></dt>
<dd><p>Return thread ident.</p>
<p>The name of this method ensures that the CSPProcess interface
in this module is identical to the one defined in
cspprocess.py.</p>
</dd></dl>

<dl class="method">
<dt id="cspthread.Par.start">
<tt class="descname">start</tt><big>(</big><big>)</big><a class="headerlink" href="#cspthread.Par.start" title="Permalink to this definition">¶</a></dt>
<dd>Start then synchronize with the execution of parallel processes.
Return when all parallel processes have returned.</dd></dl>

<dl class="method">
<dt id="cspthread.Par.terminate">
<tt class="descname">terminate</tt><big>(</big><big>)</big><a class="headerlink" href="#cspthread.Par.terminate" title="Permalink to this definition">¶</a></dt>
<dd>Terminate the execution of this process.</dd></dl>

</dd></dl>

<dl class="class">
<dt id="cspthread.Seq">
<em class="property">class </em><tt class="descclassname">cspthread.</tt><tt class="descname">Seq</tt><big>(</big><em>*procs</em><big>)</big><a class="headerlink" href="#cspthread.Seq" title="Permalink to this definition">¶</a></dt>
<dd><p>Run CSP processes sequentially.</p>
<dl class="method">
<dt id="cspthread.Seq.start">
<tt class="descname">start</tt><big>(</big><big>)</big><a class="headerlink" href="#cspthread.Seq.start" title="Permalink to this definition">¶</a></dt>
<dd>Start this process running.</dd></dl>

<dl class="method">
<dt id="cspthread.Seq.terminate">
<tt class="descname">terminate</tt><big>(</big><big>)</big><a class="headerlink" href="#cspthread.Seq.terminate" title="Permalink to this definition">¶</a></dt>
<dd>Terminate the execution of this process.</dd></dl>

</dd></dl>

<dl class="class">
<dt id="cspthread.Guard">
<em class="property">class </em><tt class="descclassname">cspthread.</tt><tt class="descname">Guard</tt><a class="headerlink" href="#cspthread.Guard" title="Permalink to this definition">¶</a></dt>
<dd><p>Abstract class to represent CSP guards.</p>
<p>All methods must be overridden in subclasses.</p>
<dl class="method">
<dt id="cspthread.Guard.disable">
<tt class="descname">disable</tt><big>(</big><big>)</big><a class="headerlink" href="#cspthread.Guard.disable" title="Permalink to this definition">¶</a></dt>
<dd>Roll back from an L{enable} call.</dd></dl>

<dl class="method">
<dt id="cspthread.Guard.enable">
<tt class="descname">enable</tt><big>(</big><big>)</big><a class="headerlink" href="#cspthread.Guard.enable" title="Permalink to this definition">¶</a></dt>
<dd>Prepare for, but do not commit to a synchronisation.</dd></dl>

<dl class="method">
<dt id="cspthread.Guard.is_selectable">
<tt class="descname">is_selectable</tt><big>(</big><big>)</big><a class="headerlink" href="#cspthread.Guard.is_selectable" title="Permalink to this definition">¶</a></dt>
<dd>Should return C{True} if this guard can be selected by an L{Alt}.</dd></dl>

<dl class="method">
<dt id="cspthread.Guard.poison">
<tt class="descname">poison</tt><big>(</big><big>)</big><a class="headerlink" href="#cspthread.Guard.poison" title="Permalink to this definition">¶</a></dt>
<dd>Terminate all processes attached to this guard.</dd></dl>

<dl class="method">
<dt id="cspthread.Guard.select">
<tt class="descname">select</tt><big>(</big><big>)</big><a class="headerlink" href="#cspthread.Guard.select" title="Permalink to this definition">¶</a></dt>
<dd>Commit to a synchronisation started by L{enable}.</dd></dl>

</dd></dl>

<dl class="class">
<dt id="cspthread.Channel">
<em class="property">class </em><tt class="descclassname">cspthread.</tt><tt class="descname">Channel</tt><a class="headerlink" href="#cspthread.Channel" title="Permalink to this definition">¶</a></dt>
<dd><p>CSP Channel objects.</p>
<p>In python-csp there are two sorts of channel. In JCSP terms these
are Any2Any, Alting channels. However, each channel creates an
operating system level pipe. Since this is a file object the
number of channels a program can create is limited to the maximum
number of files the operating system allows to be open at any one
time. To avoid this bottleneck use L{FileChannel} objects, which
close the file descriptor used for IPC after every read or write
operations. Read and write operations are, however, over 20 time
slower when performed on L{FileChannel} objects.</p>
<p>Subclasses of C{Channel} must call L{_setup()} in their
constructor and override L{put}, L{get}, L{__del__},
L{__getstate__} and L{__setstate__}, the latter two methods for
pickling.</p>
<dl class="method">
<dt id="cspthread.Channel.disable">
<tt class="descname">disable</tt><big>(</big><big>)</big><a class="headerlink" href="#cspthread.Channel.disable" title="Permalink to this definition">¶</a></dt>
<dd><p>Disable this channel for Alt selection.</p>
<p>MUST be called after L{enable} if this channel is not selected.</p>
</dd></dl>

<dl class="method">
<dt id="cspthread.Channel.enable">
<tt class="descname">enable</tt><big>(</big><big>)</big><a class="headerlink" href="#cspthread.Channel.enable" title="Permalink to this definition">¶</a></dt>
<dd><p>Enable a read for an Alt select.</p>
<p>MUST be called before L{select()} or L{is_selectable()}.</p>
</dd></dl>

<dl class="method">
<dt id="cspthread.Channel.get">
<tt class="descname">get</tt><big>(</big><big>)</big><a class="headerlink" href="#cspthread.Channel.get" title="Permalink to this definition">¶</a></dt>
<dd>Get a Python object from a process-safe store.</dd></dl>

<dl class="method">
<dt id="cspthread.Channel.is_selectable">
<tt class="descname">is_selectable</tt><big>(</big><big>)</big><a class="headerlink" href="#cspthread.Channel.is_selectable" title="Permalink to this definition">¶</a></dt>
<dd>Test whether Alt can select this channel.</dd></dl>

<dl class="method">
<dt id="cspthread.Channel.poison">
<tt class="descname">poison</tt><big>(</big><big>)</big><a class="headerlink" href="#cspthread.Channel.poison" title="Permalink to this definition">¶</a></dt>
<dd>Poison a channel causing all processes using it to terminate.</dd></dl>

<dl class="method">
<dt id="cspthread.Channel.put">
<tt class="descname">put</tt><big>(</big><em>item</em><big>)</big><a class="headerlink" href="#cspthread.Channel.put" title="Permalink to this definition">¶</a></dt>
<dd>Put C{item} on a process-safe store.</dd></dl>

<dl class="method">
<dt id="cspthread.Channel.read">
<tt class="descname">read</tt><big>(</big><big>)</big><a class="headerlink" href="#cspthread.Channel.read" title="Permalink to this definition">¶</a></dt>
<dd>Read (and return) a Python object from this channel.</dd></dl>

<dl class="method">
<dt id="cspthread.Channel.resume">
<tt class="descname">resume</tt><big>(</big><big>)</big><a class="headerlink" href="#cspthread.Channel.resume" title="Permalink to this definition">¶</a></dt>
<dd>Resume this mobile channel after migrating between processes.</dd></dl>

<dl class="method">
<dt id="cspthread.Channel.select">
<tt class="descname">select</tt><big>(</big><big>)</big><a class="headerlink" href="#cspthread.Channel.select" title="Permalink to this definition">¶</a></dt>
<dd>Complete a Channel read for an Alt select.</dd></dl>

<dl class="method">
<dt id="cspthread.Channel.suspend">
<tt class="descname">suspend</tt><big>(</big><big>)</big><a class="headerlink" href="#cspthread.Channel.suspend" title="Permalink to this definition">¶</a></dt>
<dd>Suspend this mobile channel before migrating between processes.</dd></dl>

<dl class="method">
<dt id="cspthread.Channel.write">
<tt class="descname">write</tt><big>(</big><em>obj</em><big>)</big><a class="headerlink" href="#cspthread.Channel.write" title="Permalink to this definition">¶</a></dt>
<dd>Write a Python object to this channel.</dd></dl>

</dd></dl>

<dl class="class">
<dt id="cspthread.FileChannel">
<em class="property">class </em><tt class="descclassname">cspthread.</tt><tt class="descname">FileChannel</tt><a class="headerlink" href="#cspthread.FileChannel" title="Permalink to this definition">¶</a></dt>
<dd><p>Channel objects using files on disk.</p>
<p>C{FileChannel} objects close their files after each read or write
operation. The advantage of this is that client code can create as
many C{FileChannel} objects as it wishes (unconstrained by the
operating system&#8217;s maximum number of open files). In return there
is a performance hit &#8211; reads and writes are around 10 x slower on
C{FileChannel} objects compared to L{Channel} objects.</p>
<dl class="method">
<dt id="cspthread.FileChannel.get">
<tt class="descname">get</tt><big>(</big><big>)</big><a class="headerlink" href="#cspthread.FileChannel.get" title="Permalink to this definition">¶</a></dt>
<dd>Get a Python object from a process-safe store.</dd></dl>

<dl class="method">
<dt id="cspthread.FileChannel.put">
<tt class="descname">put</tt><big>(</big><em>item</em><big>)</big><a class="headerlink" href="#cspthread.FileChannel.put" title="Permalink to this definition">¶</a></dt>
<dd>Put C{item} on a process-safe store.</dd></dl>

<dl class="method">
<dt id="cspthread.FileChannel.resume">
<tt class="descname">resume</tt><big>(</big><big>)</big><a class="headerlink" href="#cspthread.FileChannel.resume" title="Permalink to this definition">¶</a></dt>
<dd>Suspend this mobile channel after migrating between processes.</dd></dl>

<dl class="method">
<dt id="cspthread.FileChannel.suspend">
<tt class="descname">suspend</tt><big>(</big><big>)</big><a class="headerlink" href="#cspthread.FileChannel.suspend" title="Permalink to this definition">¶</a></dt>
<dd>Suspend this mobile channel before migrating between processes.</dd></dl>

</dd></dl>

<dl class="function">
<dt id="cspthread.process">
<tt class="descclassname">cspthread.</tt><tt class="descname">process</tt><big>(</big><em>func</em><big>)</big><a class="headerlink" href="#cspthread.process" title="Permalink to this definition">¶</a></dt>
<dd><p>Decorator to turn a function into a CSP process.</p>
<p>Note that the function itself will not be a CSPProcess object, but
will generate a CSPProcess object when called.</p>
</dd></dl>

<dl class="function">
<dt id="cspthread.forever">
<tt class="descclassname">cspthread.</tt><tt class="descname">forever</tt><big>(</big><em>func</em><big>)</big><a class="headerlink" href="#cspthread.forever" title="Permalink to this definition">¶</a></dt>
<dd><p>Decorator to turn a function into a CSP server process.</p>
<p>It is preferable to use this rather than &#64;process, to enable the
CSP tracer to terminate correctly and produce a CSP model, or
other debugging information.</p>
</dd></dl>

</div>
<div class="section" id="indices-and-tables">
<h1>Indices and tables<a class="headerlink" href="#indices-and-tables" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><a class="reference external" href="genindex.html"><em>Index</em></a></li>
<li><a class="reference external" href="modindex.html"><em>Module Index</em></a></li>
<li><a class="reference external" href="search.html"><em>Search Page</em></a></li>
</ul>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/pythoncsp-docs.png" alt="Logo"/>
            </a></p>
            <h3><a href="index.html">Table Of Contents</a></h3>
            <ul>
<li><a class="reference external" href="#">CSP based on POSIX threads</a></li>
<li><a class="reference external" href="#indices-and-tables">Indices and tables</a></li>
</ul>

            <h4>Previous topic</h4>
            <p class="topless"><a href="cspprocess.html"
                                  title="previous chapter">CSP based on OS processes</a></p>
            <h4>Next topic</h4>
            <p class="topless"><a href="tracer.html"
                                  title="next chapter">Debugging with the tracer module</a></p>
            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="_sources/cspthread.txt"
                     rel="nofollow">Show Source</a></li>
            </ul>
          <div id="searchbox" style="display: none">
            <h3>Quick search</h3>
              <form class="search" action="search.html" method="get">
                <input type="text" name="q" size="18" />
                <input type="submit" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
              <p class="searchtip" style="font-size: 90%">
              Enter search terms or a module, class or function name.
              </p>
          </div>
          <script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="modindex.html" title="Global Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="tracer.html" title="Debugging with the tracer module"
             >next</a> |</li>
        <li class="right" >
          <a href="cspprocess.html" title="CSP based on OS processes"
             >previous</a> |</li>
        <li><a href="index.html">python-csp v0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
      &copy; Copyright 2010, Sarah Mount.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 0.6.4.
    </div>
  </body>
</html>